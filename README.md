# a11y-devtools-extension

JIS X 8341-3:2016に基づくアクセシビリティ検査を行うChrome DevTools拡張機能です。axe-coreを使用してページ内のa11y違反を検出し、エラー内容を日本語で表示します。

## 構造

```
devtools-extension/
├── manifest.json       # 拡張機能の定義ファイル
├── devtools.html       # DevToolsパネルのHTML
├── devtools.js         # DevToolsパネルを作成するJavaScript
├── content.js          # メインロジック（axe実行・翻訳処理）
├── axe.min.js          # axe-coreライブラリ (v4.10.2)
└── ja.json             # 日本語ロケールファイル（未使用）
```

## 使用している外部API・ライブラリについて

### 1. axe-core (v4.10.2)

- **用途**: Webページのアクセシビリティ検査エンジン
- **ライセンス**: MPL-2.0 (Mozilla Public License 2.0)
- **提供元**: Deque Systems
- **公式サイト**: https://github.com/dequelabs/axe-core
- **メンテナンス状況**: ✅ 活発にメンテナンス中（大手企業によるサポートあり）
- **セキュリティ**: 定期的にセキュリティアップデートがリリースされている
- **更新推奨**: 定期的に`npm update axe-core`を実行してください

### 2. MyMemory Translation API

- **用途**: axe-coreの英語エラーメッセージを日本語に翻訳
- **エンドポイント**: `https://api.mymemory.translated.net/get`
- **ライセンス**: 無料プラン（1日1000リクエストまで）
- **提供元**: Translated SRL
- **公式サイト**: https://mymemory.translated.net/
- **⚠️ 注意事項**:
  - **サービス継続性**: 無料サービスのため、予告なく終了・変更される可能性があります
  - **プライバシー**: エラーメッセージが外部サーバーに送信されます（個人情報は含まれません）
  - **レート制限**: 1日1000リクエストの制限があります
  - **オフライン動作**: インターネット接続が必要です
  - **翻訳品質**: 機械翻訳のため、完璧な翻訳を保証するものではありません

## セキュリティに関する注意事項

### 定期的なメンテナンスが必要です

このプロジェクトは以下の理由により、定期的なメンテナンスが推奨されます:

1. **依存パッケージの脆弱性**
   - axe-coreのセキュリティアップデートに追従する必要があります
   - 定期的に`npm audit`を実行し、脆弱性をチェックしてください
   - 脆弱性が見つかった場合は`npm audit fix`で修正してください

2. **外部API依存のリスク**
   - MyMemory Translation APIはサードパーティサービスです
   - サービス終了や仕様変更のリスクがあります
   - API障害時は翻訳機能が動作しません（元の英語が表示されます）

3. **Chrome拡張機能のポリシー変更**
   - Manifest V3の仕様変更に対応する必要があります
   - 将来的に権限要件が変更される可能性があります

### メンテナンスコマンド

```bash
# 依存パッケージの脆弱性チェック
npm audit

# 脆弱性の自動修正
npm audit fix

# axe-coreのアップデート
npm update axe-core

# メジャーバージョンアップ（破壊的変更の可能性あり）
npm install axe-core@latest
```

## 翻訳APIの代替案

MyMemory Translation APIが利用できなくなった場合の代替案:

### オプション1: 静的な日本語翻訳マッピングを使用

外部APIを使わず、よく使われるaxe-coreルールの日本語訳を手動でマッピングする方法です。

**メリット**:
- オフラインで動作
- プライバシーの懸念なし
- レート制限なし

**デメリット**:
- すべてのルールをカバーできない
- axe-coreの更新時に手動でメンテナンス必要

### オプション2: Google Cloud Translation API（有料）

**メリット**:
- 高品質な翻訳
- 安定したサービス提供
- 大手企業によるサポート

**デメリット**:
- APIキーが必要
- 使用量に応じた課金

### オプション3: axe-coreの公式ロケールファイルを使用

**注意**: 現在はバージョン不一致のエラーが発生するため使用できません。将来的にaxe-coreのバージョンを更新することで解決する可能性があります。

## 推奨事項

1. **定期的なアップデート**: 最低でも3ヶ月に1回は依存パッケージを更新してください
2. **脆弱性スキャン**: リリース前に必ず`npm audit`を実行してください
3. **APIモニタリング**: MyMemory APIの稼働状況を定期的に確認してください
4. **バックアップ計画**: 翻訳APIが利用できなくなった場合の代替案を準備しておいてください

## インストール方法

1. リポジトリをクローンまたはダウンロード
2. `npm install`で依存パッケージをインストール
3. Chromeで`chrome://extensions/`を開く
4. 「デベロッパーモード」を有効化
5. 「パッケージ化されていない拡張機能を読み込む」をクリック
6. `devtools-extension`フォルダを選択

## 使い方

1. 任意のWebページを開く
2. Chrome DevToolsを開く（F12キー）
3. 「JIS X 8341-3 Checker」タブをクリック
4. 「検閲する」ボタンをクリック
5. エラーが日本語で表示され、該当箇所が赤枠でハイライトされます
6. エラー箇所にマウスホバーすると詳細情報がツールチップで表示されます

## トラブルシューティング

### 翻訳が英語のまま表示される

- インターネット接続を確認してください
- MyMemory APIのレート制限（1日1000リクエスト）に達している可能性があります
- ブラウザのコンソールで翻訳エラーを確認してください

### 拡張機能が動作しない

- Chrome拡張機能を再読み込みしてください
- DevToolsを一度閉じて開き直してください
- ブラウザのコンソールでエラーメッセージを確認してください

## 今後の開発予定

- [ ] 翻訳結果のキャッシュ機能（LocalStorage使用）
- [ ] オフライン対応（静的翻訳マッピング）
- [ ] 翻訳APIのフォールバック機能
- [ ] エクスポート機能（レポート生成）
- [ ] カスタマイズ可能な検査ルール

## ライセンス

このプロジェクトは以下のライブラリを使用しています:

- axe-core: MPL-2.0 License
- MyMemory Translation API: 利用規約に準拠

## 免責事項

- このツールは開発補助ツールであり、アクセシビリティ準拠を完全に保証するものではありません
- 翻訳の正確性については保証しません
- 外部APIの利用に関しては自己責任でお願いします
- プロダクション環境での使用前に、必ず手動での確認を行ってください
